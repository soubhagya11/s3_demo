"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9914],{49914:(me,M,n)=>{n.r(M),n.d(M,{AdminModule:()=>pe});var A=n(32174),D=n(11210),j=n(15861),l=n(32236),N=n(42863),C=n(48819),e=n(94650),U=n(47561),Q=n(76700),I=n(75875),H=n(61135),w=n(90313),J=n(80529);let T=(()=>{class i{authService;http;messageSource=new H.X("");currentMessage=this.messageSource.asObservable();constructor(a,s){this.authService=a,this.http=s}changeMessage(a){this.messageSource.next(a)}getAll(a,s,t,r,o,p,m,b,g,c,S){const B=p?"&condition="+p:"",Y=c||"",k=w.L.isEmpty(S)?"":"&advSearchString="+JSON.stringify(S);return w.L.isEmpty(B)?this.authService.getApiCall("api/v1/flaggedusers?&skip="+a+"&limit="+s+"&sort="+t+"&type=list&search="+r+"&enterprise.enterprise_id="+o+g+Y+k,b):this.authService.getApiCall("api/v1/flaggedusers?&skip="+a+"&limit="+s+"&sort="+t+"&type=list&search="+r+"&enterprise.enterprise_id="+o+B+g+Y+k,b)}update(a){return new Promise((s,t)=>{this.authService.putApiCall("api/v1/flaggedusers",a).subscribe(r=>{s(r)},r=>{t(r)})})}static \u0275fac=function(s){return new(s||i)(e.LFG(I.e),e.LFG(J.eN))};static \u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var f=n(30578),V=n(42786),F=n(27601),y=n(70057),u=n(62510),h=n(54463),E=n(93875),z=n(88425);const _=["datatableComponent"];let W=(()=>{class i extends U.O{ColumnHeader;actionSheetController;flaggedUsersService;loggerService;router;translateService;commonService;listingVariables;route;toastController;datatableComponent;searchValueChange=new e.vpe;actionStatus;actions;checkId;compareObj;contact_name;enterpriseId;eventClickData;flagedusersStatsObj=new X;flaggedUsersListData;flaggedUsersMobileListData;flaggedusersSubscriptionObj;forcerefresh=!1;header;isFilterClicked=!1;noDuplicates=void 0;object_type;show=!0;searchString;statsflageduserslistData;status;statusObj;dataJsonObj={};constructor(a,s,t,r,o,p,m,b,g,c){super(g,m),this.ColumnHeader=a,this.actionSheetController=s,this.flaggedUsersService=t,this.loggerService=r,this.router=o,this.translateService=p,this.commonService=m,this.listingVariables=b,this.route=g,this.toastController=c,this.route.queryParams.subscribe(S=>{this.dataJsonObj.queryParamsObj={defaultView:S.default_view,selectedMenuId:S.selectedMenuId,selectedSubMenuId:S.selectedSubMenuId}})}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.FLAGGED_USERS,this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:l.hf,pageSettingEnum:l.AM,pageSettingFieldsEnum:l.In},this.dataJsonObj.advancedSearchObj={},this.commonService.trackView(l.sn.FLAGGEDUSERS_LIST),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.FLAGGED_USERS",value:"",showSubMenuDisplayName:!0}],this.object_type=this.route.snapshot.data.object_type,this.header=this.ColumnHeader.getflaggedUsersData(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.commonService.currentEvent.subscribe(a=>{"flaggedusers"===a&&(this.forcerefresh=!0)}),this.actions={VIEW:this.roleRightsValidationByPage(l.hf.FLAGGED_USERS,l.AM.ACTIONS,l.In.VIEW)},this.dataJsonObj.pageActionsList=[],this.dataJsonObj.addFiltersList=[],this.roleRightsValidationByPage(l.hf.FLAGGED_USERS,l.AM.ACTIONS,l.In.CREATE),this.roleRightsValidationByPage(l.hf.FLAGGED_USERS,l.AM.ACTIONS,l.In.FILTERS)}ionViewWillEnter(){}getSearchResult(a){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit(a)}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit("")}getAllRecords(){try{this.status=this.statusObj,this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.flaggedusersSubscriptionObj&&(this.flaggedusersSubscriptionObj.unsubscribe(),this.flaggedusersSubscriptionObj=void 0);const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.flaggedusersSubscriptionObj=this.flaggedUsersService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,this.status,this.isFilterClicked,this.forcerefresh,a,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(t=>{if(t.rows.length>0){this.flaggedUsersMobileListData&&this.flaggedUsersMobileListData.length>0||(this.flaggedUsersMobileListData=[]),this.forcerefresh&&(this.flaggedUsersMobileListData=[]);for(let r=0;r<t.rows.length;r++)t.rows[r].enterprise.enterpriseshort_name=t.rows[r].enterprise.short_name,t.rows[r].enterprise.short_name='<a class="enable" id="enterprise.short_name'+t.rows[r]._id+'" href="enterprises/enterprises/'+t.rows[r].enterprise.enterprise_id+'/view" >'+t.rows[r].enterprise.short_name,t.rows[r].users.reported_user_profile.f_name=t.rows[r].users.reported_user_profile.f_name?t.rows[r].users.reported_user_profile.f_name+", "+t.rows[r].users.reported_user_profile.l_name:"","0"==t.rows[r].count_groups_active&&(t.rows[r].count_groups_active="0"),this.flaggedUsersMobileListData=this.flaggedUsersMobileListData.filter(o=>o._id!==t.rows[r]._id),this.flaggedUsersMobileListData.push(t.rows[r]);t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.flaggedUsersListData=this.flaggedUsersListData.concat(t.rows)):this.flaggedUsersListData=t.rows}else this.flaggedUsersListData=[],this.flaggedUsersMobileListData=[]})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)}}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.flaggedUsersMobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}onActionClicked(a){a.action===l.A0.VIEW&&(localStorage.setItem(l.BU.FLAGGED_USERS_DATA,JSON.stringify({enterprise_id:this.enterpriseId,page_nummber:this.listingVariables.pageNumbers,rowsperpage:this.listingVariables.rowsPerPage,searchstring:this.searchString})),this.commonService.redirectToUrl(["..",a.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route))}mobileEventAction(a){this.presentActionSheet(a)}presentActionSheet(a){var s=this;return(0,j.Z)(function*(){yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:[{text:s.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{localStorage.setItem(l.BU.FLAGGED_USERS_DATA,JSON.stringify({enterprise_id:s.enterpriseId,page_nummber:s.listingVariables.pageNumbers,"Contact Types":s.listingVariables.rowsPerPage})),s.commonService.redirectToUrl(["..",a._id,"view"],!0,!0,s.dataJsonObj.queryParamsObj?s.dataJsonObj.queryParamsObj:"",s.route)}}]})).present()})()}toggle(){this.show=!this.show}statsData(a){try{this.isFilterClicked=!0,this.statusObj=a.value,this.forcerefresh=!0,this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.flaggedUsersMobileListData=[],this.getAllRecords()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"statsData",s)}}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a?this.dataJsonObj.selectedFilter=a:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(a){}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}static \u0275fac=function(s){return new(s||i)(e.Y36(N.Y),e.Y36(y.BX),e.Y36(T),e.Y36(V.m),e.Y36(u.F0),e.Y36(h.sK),e.Y36(C.v),e.Y36(f.v),e.Y36(u.gz),e.Y36(y.yF))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-flaggedusers-list"]],viewQuery:function(s,t){if(1&s&&e.Gf(_,5),2&s){let r;e.iGM(r=e.CRH())&&(t.datatableComponent=r.first)}},outputs:{searchValueChange:"searchValueChange"},features:[e._Bn([f.v,T,N.Y,F.s]),e.qOj],decls:9,vars:28,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",1,"",3,"header","totalRecords","data","expand","actions","totalPages","mobileListData","listingVariables","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(o){return t.onHeaderItemClick(o)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(o){return t.onActionClicked(o)})("redirectionEvent",function(o){return t.mobileEventAction(o)})("changeStats",function(o){return t.statsData(o)})("loadPageData",function(o){return t.loadPageData(o)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(o){return t.onPageLevelActionClicked(o)}),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",t.header)("totalRecords",t.listingVariables.totalRecords)("data",t.flaggedUsersListData)("expand",!1)("actions",t.actions)("totalPages",t.listingVariables.totalpages)("mobileListData",t.flaggedUsersMobileListData)("listingVariables",t.listingVariables)("statsShow",t.show)("showRights",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.FLAGGED_USERS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",t.searchString)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList))},dependencies:[Q.n,E.q,z.y]})}return i})();class X{TOTAL_USERS_FLAGGED;TOTAL_USERS_ACTIVE_FLAGGED;TOTAL_USERS_INACTIVE_FLAGGED}var R=n(46448),O=n(36895),P=n(10805),G=n(2387),$=n(56368),K=n(11735),L=n(93144);function x(i,d){if(1&i&&(e.TgZ(0,"tr",29)(1,"td",30),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i){const a=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",a[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function q(i,d){if(1&i&&e.YNc(0,x,4,4,"tr",28),2&i){const a=e.oxw();e.Q6J("ngIf",(null==a.viewData?null:a.viewData.userReports)&&0===(null==a.viewData?null:a.viewData.userReports.length))}}function ee(i,d){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const a=d.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,a.header)," ")}}function te(i,d){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,ee,3,3,"th",31),e.qZA()),2&i){const a=d.$implicit;e.xp6(1),e.Q6J("ngForOf",a[0])}}function ae(i,d){if(1&i){const a=e.EpF();e.TgZ(0,"i",37),e.NdJ("click",function(){e.CHM(a);const t=e.oxw(3).$implicit,r=e.oxw();return e.KtG(r.blockedMembersView(t))}),e.qZA()}if(2&i){const a=e.oxw(3).rowIndex;e.MGl("id","flaggeduser-view-unblockbtn",a,"")}}function se(i,d){if(1&i&&(e.TgZ(0,"span",35),e.YNc(1,ae,1,1,"i",36),e.qZA()),2&i){const a=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!0===a.enable)}}function ie(i,d){if(1&i&&(e.TgZ(0,"td",33),e._uU(1),e.YNc(2,se,2,1,"span",34),e.qZA()),2&i){const a=d.$implicit,s=e.oxw().$implicit;e.Tol(a.class),e.Q6J("pSelectableRow",s),e.xp6(1),e.hij(" ",s[a.field]," "),e.xp6(1),e.Q6J("ngIf","Actions"===a.header)}}function ne(i,d){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,ie,3,6,"td",32),e.qZA()),2&i){const a=d.columns;e.xp6(1),e.Q6J("ngForOf",a[0])}}let re=(()=>{class i extends U.O{flaggedUsersService;loggerService;navigationService;router;translateService;uiUtils;commonService;listingVariables;route;apiData;enterpriseId;forcerefresh=!1;header1;recordId;searchString;userName;viewData;dataJsonObj={};constructor(a,s,t,r,o,p,m,b,g){super(g,m),this.flaggedUsersService=a,this.loggerService=s,this.navigationService=t,this.router=r,this.translateService=o,this.uiUtils=p,this.commonService=m,this.listingVariables=b,this.route=g,this.route.params.subscribe(c=>{this.recordId=c.id}),this.route.queryParams.subscribe(c=>{this.dataJsonObj.queryParamsObj={defaultView:c.defaultView,selectedMenuId:c.selectedMenuId,selectedSubMenuId:c.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.FLAGGED_USERS,this.commonService.trackView(l.sn.FLAGGEDUSERS_VIEW),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FLAGGED_USERS",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.flaggedUsersService.currentMessage.subscribe(t=>this.viewData=t),this.header1=[[{field:"userName",header:this.translateService.instant("COMMON_FIELDS.USER_NAME")},{field:"reason",header:this.translateService.instant("COMMON_FIELDS.REASON")}]],this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.FLAGGED_USERS,l.AM.ACTIONS,l.In.RECORD_HISTORY);const a=localStorage.getItem(l.BU.FLAGGED_USERS_DATA);this.apiData=JSON.parse(a),localStorage.removeItem(l.BU.FLAGGED_USERS_DATA),this.enterpriseId=this.apiData.enterprise_id,this.commonService.currentEvent.subscribe(t=>{"flaggedusers"===t&&(this.forcerefresh=!0)}),this.dataJsonObj.selectedPage=l.hf.FLAGGED_USERS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}]),this.searchString=void 0!==this.apiData.searchstring?this.apiData.searchstring:"",this.listingVariables.pageNumbers=this.apiData.page_nummber,this.listingVariables.rowsPerPage=this.apiData.rowsperpage,this.getAllRecords()}getDynamicJson(a){var s=this;return(0,j.Z)(function*(){for(let t of a)s.dataJsonObj[t.storingFieldName]=yield s.commonService.getDynamicJson(s.enterpriseId,t.folderName,t.jsonType);s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.recordId,s.dataJsonObj.selectedObj.pageObj=s.dataJsonObj.menuDataJson.filter(t=>t.menu_page.page_name===s.dataJsonObj.selectedPage),s.dataJsonObj.selectedObjEnabled=!0})()}getAllRecords(){try{this.flaggedUsersService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,"","",this.forcerefresh).subscribe(a=>{if(a.rows.length>0){for(let s=0;s<a.rows.length;s++)-1!==this.recordId.indexOf(a.rows[s]._id)&&this.recordId==a.rows[s]._id&&(this.viewData=a.rows[s],this.userName=this.viewData.f_name?this.viewData.f_name+", "+this.viewData.l_name:"");for(let s=0;s<this.viewData.userReports.length;s++)this.viewData.userReports[s].userName=this.viewData.userReports[s].user_flagged_by.f_name+" , "+this.viewData.userReports[s].user_flagged_by.l_name,this.viewData.userReports[s].reason=this.lookupLanguageTranslations(this.viewData.userReports[s].user_flag_reason.lookup_id),this.viewData.userReports[s].reported_user_profile.user_profile_id===parseInt(this.recordId,10)&&(this.viewData.created_by=this.viewData.userReports[s].created_by,this.viewData.updated_by=this.viewData.userReports[s].updated_by,this.viewData.createdAt=this.viewData.userReports[s].createdAt,this.viewData.updatedAt=this.viewData.userReports[s].updatedAt)}})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)}}Block(a){this.flaggedUsersService.update({status:a,user_id:this.viewData._id}).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},t=>{this.loggerService.setLoggerError(this.constructor.name,"Block",t)})}Close(){this.commonService.redirectToPreviousUrl()}static \u0275fac=function(s){return new(s||i)(e.Y36(T),e.Y36(V.m),e.Y36(R.f),e.Y36(u.F0),e.Y36(h.sK),e.Y36(F.s),e.Y36(C.v),e.Y36(f.v),e.Y36(u.gz))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-flaggedusers-view"]],features:[e._Bn([f.v]),e.qOj],decls:45,vars:48,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","flaggeduser-view-enterprisesname",3,"label","value"],["disabled","true","id","flaggeduser-view-username",3,"label","value"],["mandatory","false","disabled","true","id","flaggeduser-view-status",3,"label","value"],["disabled","true","id","flaggeduser-view-groups",3,"label","value"],[1,"col-md-8","text-end","mt-2","mb-2"],["id","flaggeduser-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","flaggeduser-view-block","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","flaggeduser-view-unblock","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],["id","report_members",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable",3,"columns","value","paginator","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"],[3,"pSelectableRow"],["class","ui-column-values",4,"ngIf"],[1,"ui-column-values"],["aria-hidden","true","class","fas fa-15x fa-unlock","title","UnBlock",3,"id","click",4,"ngIf"],["aria-hidden","true","title","UnBlock",1,"fas","fa-15x","fa-unlock",3,"id","click"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",13),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",14)(22,"app-button",15),e.NdJ("buttonOnClick",function(){return t.Close()}),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"app-button",16),e.NdJ("buttonOnClick",function(){return t.Block("block")}),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"app-button",17),e.NdJ("buttonOnClick",function(){return t.Block("unblock")}),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"div",18)(29,"div",3)(30,"div",19)(31,"div",20)(32,"p-accordion")(33,"p-accordionTab",21)(34,"p-header",22)(35,"span"),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",18)(39,"div",3)(40,"p-table",23),e.YNc(41,q,1,1,"ng-template",24),e.YNc(42,te,2,1,"ng-template",25),e.YNc(43,ne,2,1,"ng-template",26),e.qZA()()()(),e._UZ(44,"app-recordhistory",27),e.qZA()()()()()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,32,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==t.viewData||null==t.viewData.enterprise?null:t.viewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,34,"COMMON_FIELDS.USER_NAME")),e.s9C("value",null==t.viewData?null:t.viewData.f_name),e.xp6(3),e.s9C("label",e.lcZ(17,36,"COMMON_FIELDS.STATUS")),e.s9C("value",t.lookupLanguageTranslations(null==t.viewData||null==t.viewData.users||null==t.viewData.users.user_flag_status?null:t.viewData.users.user_flag_status.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(20,38,"REPORTS.ACTIVE_GROUPS")),e.s9C("value",null==t.viewData?null:t.viewData.count_groups_active),e.xp6(3),e.s9C("label",e.lcZ(23,40,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(2),e.s9C("label",e.lcZ(25,42,"COMMON_BUTTONS.BUTTON_BLOCK")),e.xp6(2),e.s9C("label",e.lcZ(27,44,"REPORTS.NO_VIOLATION")),e.xp6(7),e.Q6J("selected",!0),e.xp6(3),e.AsE("",e.lcZ(37,46,"COMMON_PAGE_TITLES.FLAGGED_USERS")," (",null==t.viewData?null:t.viewData.UserReportsCount,")"),e.xp6(4),e.Q6J("columns",t.header1)("value",null==t.viewData?null:t.viewData.userReports)("paginator",!1)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(4),e.Q6J("createdBy",null==t.viewData?null:t.viewData.created_by)("lastUpdatedBy",null==t.viewData?null:t.viewData.updated_by)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.viewData?null:t.viewData.createdAt)("lastUpdatedDate",null==t.viewData?null:t.viewData.updatedAt))},dependencies:[O.sg,O.O5,A.UQ,A.US,P.h4,P.jx,G.r,$.a,K.W,E.q,L.iA,L.Ei,h.X$]})}return i})();var Z=n(15439);let le=(()=>{class i{http;authService;constructor(a,s){this.http=a,this.authService=s}getAll(a){return new Promise((s,t)=>{this.authService.getApiCall("api/v1/logsdata/?logdate="+a).subscribe(r=>{s(r)},r=>{t(r)})})}static \u0275fac=function(s){return new(s||i)(e.LFG(J.eN),e.LFG(I.e))};static \u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var v=n(24006),oe=n(17867);const ce=[{path:"",redirectTo:"lookuptypes",pathMatch:"full"},{path:"lookupcodes",loadChildren:()=>Promise.all([n.e(8592),n.e(8485)]).then(n.bind(n,68485)).then(i=>i.LookupCodesModule)},{path:"lookuptypes",loadChildren:()=>Promise.all([n.e(8592),n.e(9663)]).then(n.bind(n,19663)).then(i=>i.LookupTypesModule)},{path:"languages",loadChildren:()=>Promise.all([n.e(8592),n.e(9371)]).then(n.bind(n,19371)).then(i=>i.LanguagesModule)},{path:"uiicons",loadChildren:()=>n.e(9388).then(n.bind(n,9388)).then(i=>i.UiIconsModule)},{path:"usertypes",loadChildren:()=>Promise.all([n.e(8592),n.e(5581)]).then(n.bind(n,5581)).then(i=>i.UserTypesModule)},{path:"rolerightsbypage",loadChildren:()=>n.e(1186).then(n.bind(n,51186)).then(i=>i.RolerightsbypageModule)},{path:"loginhistory",loadChildren:()=>n.e(6123).then(n.bind(n,36123)).then(i=>i.LoginHistoryModule)},{path:"attributedefinitions",loadChildren:()=>Promise.all([n.e(8592),n.e(7016)]).then(n.bind(n,77016)).then(i=>i.AttributeDefinitionModule)},{path:"flaggedusers/list",canActivate:[D.P],component:W,data:{object_type:l.hf.FLAGGED_USERS,title:"flaggedusers Listing",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.FLAGGED_USERS+"."+l.Iu.ENABLED,pageName:l.hf.FLAGGED_USERS}},{path:"flaggedusers/:id/view",canActivate:[D.P],component:re,data:{object_type:l.hf.FLAGGED_USERS,title:"flaggedusers View",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.FLAGGED_USERS+"."+l.In.VIEW,pageName:l.hf.FLAGGED_USERS,pageSetting:l.AM.ACTIONS,settingField:l.In.VIEW}},{path:"serverlogs/list",component:(()=>{class i{navigationService;router;serverLogs;translateService;commonService;dateValue;defaultValue;error;dataJsonObj={};constructor(a,s,t,r,o){this.navigationService=a,this.router=s,this.serverLogs=t,this.translateService=r,this.commonService=o}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.SERVER_LOGS,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.SERVER_LOGS",value:"",showSubMenuDisplayName:!1}],this.commonService.trackView(l.sn.SERVER_LOGS),document.getElementsByTagName("body"),this.dateValue=Z(new Date).format("YYYY-MM-DD"),this.getAllRecords()}chageDate(a){this.dateValue=Z(a.value).format("YYYY-MM-DD"),this.error=""}cancelBtn(){this.commonService.redirectToPreviousUrl()}getAllRecords(){this.serverLogs.getAll(this.dateValue).then(a=>{this.defaultValue=a,a||(this.error=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_LOGFILE_DOES_NOT_EXIST"))},a=>{this.commonErrorCodes(JSON.parse(a)),this.defaultValue=""})}commonErrorCodes(a){500===JSON.parse(a[l.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_LOGFILE_DOES_NOT_EXIST"))}static \u0275fac=function(s){return new(s||i)(e.Y36(R.f),e.Y36(u.F0),e.Y36(le),e.Y36(h.sK),e.Y36(C.v))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-server-logs"]],decls:26,vars:21,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["dateformat","dd-MM-yyyy",3,"placeholder","defaultDate","dateChangeValue"],[1,"col-md-9","text-end","mt-2","btns-group","pdl-0"],["className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"col-md-12","textarea-block"],["for","widgetQuery",1,"text-label"],["disabled","true","rows","23","cols","200",1,"form-control",3,"ngModel","ngModelChange"],["message","ngModel"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"app-advsearchdatepicker",10),e.NdJ("dateChangeValue",function(o){return t.chageDate(o)}),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",11)(13,"app-button",12),e.NdJ("buttonOnClick",function(){return t.getAllRecords()}),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"app-button",13),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",14),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",15)(21,"label",16),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"textarea",17,18),e.NdJ("ngModelChange",function(o){return t.defaultValue=o}),e.qZA()()()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("placeholder",e.lcZ(11,11,"COMMON_FIELDS.DATE")),e.s9C("defaultDate",t.dateValue),e.xp6(3),e.s9C("label",e.lcZ(14,13,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(16,15,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(19,17,t.error)," "),e.xp6(4),e.hij(" ",e.lcZ(23,19,"COMMON_PAGE_TITLES.SERVER_LOGS")," "),e.xp6(2),e.Q6J("ngModel",t.defaultValue))},dependencies:[v.Fj,v.JJ,v.On,G.r,oe.H,E.q,h.X$]})}return i})(),canActivate:[D.P],data:{module:l.w1.ADMIN,pageName:l.hf.SERVER_LOGS}},{path:"languagetranslations",loadChildren:()=>Promise.all([n.e(8592),n.e(3356)]).then(n.bind(n,83356)).then(i=>i.LanguageTranslationsModule)},{path:"datapublish",loadChildren:()=>n.e(3938).then(n.bind(n,53938)).then(i=>i.DataPublishModule)},{path:"data",loadChildren:()=>n.e(8920).then(n.bind(n,78920)).then(i=>i.RollbackModule)}];let ge=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({imports:[u.Bz.forChild(ce),u.Bz]})}return i})();var ue=n(83748),he=n(44281);let pe=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({imports:[O.ez,h.aw,v.u5,ge,v.UX,A.fx,he.Q,ue.v,L.U$,O.ez,y.Pc.forRoot()]})}return i})()}}]);