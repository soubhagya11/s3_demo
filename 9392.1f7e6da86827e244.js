"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9392],{49392:(B,p,o)=>{o.r(p),o.d(p,{AllInvitedRegistrationslistModule:()=>Y});var y=o(36895),S=o(54463),v=o(24006),f=o(32174),D=o(44281),I=o(3848),C=o(93144),g=o(62510),T=o(15861),c=o(32236),O=o(42863),A=o(47561),R=o(76700),j=o(30578),M=o(42786),L=o(27601),V=o(48819),F=o(90313),E=o(75875),s=o(94650),N=o(80529);let J=(()=>{class r{http;authService;userToken=localStorage.getItem(c.BU.TOKEN);constructor(e,a){this.http=e,this.authService=a}getAll(e,a,t,i,n,d,h,l,u){const m=l||"",b=F.L.isEmpty(u)?"":"&advSearchString="+JSON.stringify(u);return this.authService.getApiCall("api/v1/registrationsources?skip="+a+"&limit="+t+"&sort="+i+"&type=list&enterprise.enterprise_id="+n+"&search="+e+h+m+b,d)}static \u0275fac=function(a){return new(a||r)(s.LFG(N.eN),s.LFG(E.e))};static \u0275prov=s.Yz7({token:r,factory:r.\u0275fac})}return r})();var P=o(70057),Z=o(93875),w=o(88425);const k=["datatableComponent"],U=[{path:"",data:{title:"allinvitedregistrations"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class r extends A.O{allInvitedRegistrationslistService;commonService;route;listingVariables;columnsheaders;loggerService;actionSheetController;datatableComponent;show=!0;dataJsonObj={};loginUserDateFormat;userTimeZoneObj={};userTypesDataJson;constructor(e,a,t,i,n,d,h){super(t,a),this.allInvitedRegistrationslistService=e,this.commonService=a,this.route=t,this.listingVariables=i,this.columnsheaders=n,this.loggerService=d,this.actionSheetController=h,this.route.queryParams.subscribe(l=>{this.dataJsonObj.queryParamsObj={defaultView:l.default_view,selectedMenuId:l.selectedMenuId,selectedSubMenuId:l.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.enterpriseId=localStorage.getItem(c.BU.SELECTED_ENTERPRISE),this.dataJsonObj.noDuplicates=void 0,this.dataJsonObj.pageName=c.hf.ALL_INVITED_REGISTRATIONS,this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.INVITED_REGISTRATIONS",value:"",showSubMenuDisplayName:!1}],this.dataJsonObj.forceRefresh=!1,this.dataJsonObj.tableColumnheaders=this.columnsheaders.allInvaitedRegistrationColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.dataJsonObj.searchString="",this.dataJsonObj.actions={VIEW:!0},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[];const e=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=e.dateFormat,this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(e.timeZoneDescription),this.userTimeZoneObj.timeZoneCode=e.timeZoneCode,this.userTimeZoneObj.timeZoneToDisplay=this.lookupLanguageTranslations(e.timeZoneID),this.getMenusJsonData()}getSearchResult(e){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.dataJsonObj.searchString=e,this.dataJsonObj.listData="",this.getAllRecords(),this.datatableComponent.reset()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",a)}}searchClose(){try{this.dataJsonObj.searchString="",this.getAllRecords(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.datatableComponent.reset()}catch(e){this.loggerService.setLoggerError(this.constructor.name,"searchClose",e)}}getAllRecords(){try{const e=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView),a=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.allInvitedRegistrationslistService.getAll(this.dataJsonObj.searchString,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.dataJsonObj.enterpriseId,!!a||this.dataJsonObj.forceRefresh,e,a,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(i=>{if(i.rows.length>0){this.dataJsonObj.mobileListData&&this.dataJsonObj.mobileListData.length>0||(this.dataJsonObj.mobileListData=[]);for(let n=0;n<i.rows.length;n++){const d=this.displayDateFormatter(i.rows[n].createdAt,!1,!0,0,0);i.rows[n].invited_date=d.startDate;const h=i.rows[n].invited_user_profile.user_type_id;i.rows[n].user_type_display_name=this.userTypesDataJson&&this.userTypesDataJson[h]?this.userTypesDataJson[h].user_type_display_name:"--",i.rows[n].display_grid_title=i.rows[n].enterprise.short_name,this.dataJsonObj.mobileListData=this.dataJsonObj.mobileListData.filter(l=>l._id!==i.rows[n]._id),this.dataJsonObj.mobileListData.push(i.rows[n])}i.totalCount&&(this.listingVariables.totalRecords=i.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=i.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.dataJsonObj.listData=this.dataJsonObj.listData.concat(i.rows)):this.dataJsonObj.listData=i.rows}else this.dataJsonObj.listData=[],this.dataJsonObj.mobileListData=[]})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",e)}}displayDateFormatter(e,a,t,i,n){try{const d=t?this.commonService.convertDateToUserTimeZone(e,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):e,h=i?this.commonService.addHoursToDate(d,i):d,l={startDate:"",endDate:""};if(l.startDate=this.commonService.convertDateToUserFormat(h,c.eZ.HOURS_MINS,!0,"",!1),a){const u=t?this.commonService.convertDateToUserTimeZone(e,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):e,b=this.commonService.addHoursToDate(u,n||120);l.endDate=this.commonService.convertDateToUserFormat(b,c.eZ.HOURS_MINS,!0,"",!1)}return l}catch(d){this.loggerService.setLoggerError(this.constructor.name,"displayDateFormatter",d)}}getMenusJsonData(){var e=this;return(0,T.Z)(function*(){e.userTypesDataJson=yield e.commonService.getDynamicJson(e.dataJsonObj.enterpriseId,c.sb.USER_TYPES,"view")})()}getMobileDisplayData(e){return e.mobile_display_data[0]=e.invited_user_profile.name,e.mobile_display_data[1]=e.invited_user_profile.email,e.mobile_display_data[2]=e.invited_user_profile.user_type_id,e}loadPageData(e){this.dataJsonObj.forceRefresh=e.forceRefresh,this.listingVariables.pageNumbers=e.listingVariables.pageNumbers,e.clearMobileData&&(this.dataJsonObj.mobileListData=this.dataJsonObj.noDuplicates),e.isPaginationChange&&(this.dataJsonObj.selectedFilter=e.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=e.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=e.selectedAdvancedSearchObj),this.getAllRecords()}onActionClicked(e){}getRedirect(e){}toggle(){this.show=!this.show}selectedViewType(e){this.dataJsonObj.selectedDisplayView=e}selectedFilterType(e){e?this.dataJsonObj.selectedFilter=e:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(e){}advancedSearchFilterClicked(e){this.dataJsonObj.selectedAdvancedSearchObj=e}onHeaderItemClick(e){switch(e.type){case"search":this.getSearchResult(e.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(e.event);break;case"filters":this.selectedFilterType(e.event);break;case"advanced_search":this.advancedSearchFilterClicked(e.event);break;case"page_actions":this.onPageLevelActionClicked(e.event)}}mobileEventAction(e){}static \u0275fac=function(a){return new(a||r)(s.Y36(J),s.Y36(V.v),s.Y36(g.gz),s.Y36(j.v),s.Y36(O.Y),s.Y36(M.m),s.Y36(P.BX))};static \u0275cmp=s.Xpm({type:r,selectors:[["app-all-invited-registrationslist"]],viewQuery:function(a,t){if(1&a&&s.Gf(k,5),2&a){let i;s.iGM(i=s.CRH())&&(t.datatableComponent=i.first)}},features:[s._Bn([J,j.v,O.Y,L.s]),s.qOj],decls:8,vars:26,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","all-inv-reg-list",1,"",3,"header","data","listingVariables","totalPages","totalRecords","expand","actions","mobileListData","enablethreedots","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","redirectionEvent","itemClickEvent","loadPageData"],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(a,t){1&a&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),s.NdJ("headerItemClick",function(n){return t.onHeaderItemClick(n)}),s.qZA()(),s.TgZ(4,"div",4)(5,"app-datatable",5),s.NdJ("actionClicked",function(n){return t.onActionClicked(n)})("redirectionEvent",function(n){return t.mobileEventAction(n)})("itemClickEvent",function(n){return t.getRedirect(n)})("loadPageData",function(n){return t.loadPageData(n)}),s.qZA(),s.TgZ(6,"div",6)(7,"app-page-actions",7),s.NdJ("selectedAction",function(n){return t.onPageLevelActionClicked(n)}),s.qZA()()()()()),2&a&&(s.xp6(3),s.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),s.xp6(2),s.Q6J("header",t.dataJsonObj.tableColumnheaders)("data",t.dataJsonObj.listData)("listingVariables",t.listingVariables)("totalPages",t.listingVariables.totalpages)("totalRecords",t.listingVariables.totalRecords)("expand",!1)("actions",t.dataJsonObj.actions)("mobileListData",t.dataJsonObj.mobileListData)("enablethreedots",!0)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),s.xp6(2),s.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList))},dependencies:[R.n,Z.q,w.y]})}return r})()}]}];let H=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275mod=s.oAB({type:r});static \u0275inj=s.cJS({imports:[g.Bz.forChild(U),g.Bz]})}return r})(),Y=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275mod=s.oAB({type:r});static \u0275inj=s.cJS({imports:[y.ez,H,S.aw,v.u5,v.UX,f.fx,D.Q,I.Nh,C.U$]})}return r})()}}]);